{"data":{"site":{"siteMetadata":{"title":"sql-in-js","author":"Rick Bergfalk"}},"markdownRemark":{"id":"b5732b95-7a4e-5244-96cd-d5cf156ccf70","excerpt":"React-virtualized is a great collection of lower level components to help efficiently render large lists and tables.It was initially brought into SQLPad to…","html":"<p><a href=\"https://github.com/bvaughn/react-virtualized\">React-virtualized</a> is a great collection of lower level components to help efficiently render large lists and tables.</p>\n<p>It was initially brought into SQLPad to assist in building a custom data grid component to replace <a href=\"https://github.com/schrodinger/fixed-data-table-2\">fixed-data-table-2</a>.</p>\n<p>The SQLPad build for upcoming version 3 rework has hit 2.68 MB.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4913104bb0f919c3b87bc981fbbd5493/80f7c/bundle-20190429.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.90579710144928%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABGklEQVQoz4WSBQrEQAxF5/6XLHU36prlBVK6sLCBNDo/VjcMg6zrKvM8S5qmUhSF2suyqA+Jz/M8aZpGtm17YuSVZSlVVT1vHB/ovm/puk4oYMRj/NB1XXKe56Mfx6H6NE0KbhhfgEamA8hj7Hcc4H3f5Rf9BXz7jSgCIHIcRx0Vm7G/AEmwjiASGI1kRqMA3bEWxsQGkJy2bSUMQ3EsGqPve8nzXJkH2DDxOI5V1nWtB/J9X6IokiRJNIaP42RZJo7LosAESMKHBPw9Jt3BHM8KAkT3TEGnjpNTnYBVAch0YgAgTbeCSDqlEYs5e0zrjPJun5iNBqOTZ4DkB0Ggu+M/RXe2bJaLziGw7f+CLcaI9q/C+Nk/jB/+AHFPAVQ98A6OAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Bundle minus react-virtualized\"\n        title=\"\"\n        src=\"/static/4913104bb0f919c3b87bc981fbbd5493/b9e4f/bundle-20190429.png\"\n        srcset=\"/static/4913104bb0f919c3b87bc981fbbd5493/cf440/bundle-20190429.png 148w,\n/static/4913104bb0f919c3b87bc981fbbd5493/d2d38/bundle-20190429.png 295w,\n/static/4913104bb0f919c3b87bc981fbbd5493/b9e4f/bundle-20190429.png 590w,\n/static/4913104bb0f919c3b87bc981fbbd5493/f9b6a/bundle-20190429.png 885w,\n/static/4913104bb0f919c3b87bc981fbbd5493/2d849/bundle-20190429.png 1180w,\n/static/4913104bb0f919c3b87bc981fbbd5493/bbefa/bundle-20190429.png 1770w,\n/static/4913104bb0f919c3b87bc981fbbd5493/80f7c/bundle-20190429.png 3312w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>That’s minified but uncompressed. Once gzipped Create-React-App says it’ll squish down to 723.48 KB, which sounds better but doesn’t change the fact it is still 2.68 MB of JS that needs to parse, compile, and execute. SQLPad as become one of <em>those</em> JavaScript apps the Chrome dev relations team tweets and blogs about.</p>\n<p>I suppose one could argue that bundle size is not <em>that</em> important for an app like SQLPad. The target device is not mobile, and the experience is more of an application where you write SQL and analyze data, not a site where you consume content.</p>\n<p>Still, there is opportunity to shave off some larger-than-necessary libraries and be a bit smarter and managing the bundle budget.</p>\n<h2>Observations</h2>\n<p>Looking at the above bundle analysis a few things quickly became apparent.</p>\n<ul>\n<li>Adding Antd brought the size up real quick. (antd, icons, and related rc-components account for at least 750 KB of the bundle)</li>\n<li>react-virtualized should be swapped out with react-window</li>\n<li>Moment is fairly large and is overkill for what I am using it for (currently just date formatting)</li>\n<li>SQL formatting doesn’t need to happen in the browser - that could become an API call</li>\n</ul>\n<h2>The Goal</h2>\n<p>The core SQLPad experience is centered around 2 JavaScript libraries</p>\n<ul>\n<li>Ace editor (422 KB + 25 KB for its React wrapper)</li>\n<li>Taucharts (379 KB + 170 KB for its d3 dependencies)</li>\n</ul>\n<p>Because this is a React project, there’s also react and react-dom adding another 112 KB.</p>\n<p>This puts the core SQLPad project without my code or any of the smaller libraries or component libraries at about 1100 KB.</p>\n<p>Before officially publishing SQLPad v3, I’d like to get the bundle size under 1.5 MB uncompressed at a minimum with 1.25 MB as a stretch goal.</p>","frontmatter":{"title":"Bundle Battle 2 - react-virtualized v react-window","date":"April 29, 2019","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/20190429-bundle-battle-2/","previous":{"fields":{"slug":"/20190420-hello-world/"},"frontmatter":{"title":"Switching to Gatsby"}},"next":{"fields":{"slug":"/20190428-bundle-battle/"},"frontmatter":{"title":"Bundle Battle 1 - Bundle Analysis"}}}}