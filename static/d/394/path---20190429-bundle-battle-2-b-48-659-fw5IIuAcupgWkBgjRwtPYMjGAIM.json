{"data":{"site":{"siteMetadata":{"title":"sql-in-js","author":"Rick Bergfalk"}},"markdownRemark":{"id":"b5732b95-7a4e-5244-96cd-d5cf156ccf70","excerpt":"SQLPad 3 has gotten bloated and I’m gonna fight it.The SQLPad build for upcoming version 3 rework has hit 2.68 MB.The initial bundleThat’s minified but…","html":"<p>SQLPad 3 has gotten bloated and I’m gonna fight it.</p>\n<p>The SQLPad build for upcoming version 3 rework has hit 2.68 MB.</p>\n<p><img src=\"./bundle-20190422.png\" alt=\"The initial bundle\"></p>\n<p>That’s minified but uncompressed. Once gzipped Create-React-App says it’ll squish down to 723.48 KB, which sounds better but doesn’t change the fact it is still 2.68 MB of JS that needs to parse, compile, and execute. SQLPad as become one of <em>those</em> JavaScript apps the Chrome dev relations team tweets and blogs about.</p>\n<p>I suppose one could argue that bundle size is not <em>that</em> important for an app like SQLPad. The target device is not mobile, and the experience is more of an application where you write SQL and analyze data, not a site where you consume content.</p>\n<p>Still, there is opportunity to shave off some larger-than-necessary libraries and be a bit smarter and managing the bundle budget.</p>\n<h2>Observations</h2>\n<p>Looking at the above bundle analysis a few things quickly became apparent.</p>\n<ul>\n<li>Adding Antd brought the size up real quick. (antd, icons, and related rc-components account for at least 750 KB of the bundle)</li>\n<li>react-virtualized should be swapped out with react-window</li>\n<li>Moment is fairly large and is overkill for what I am using it for (currently just date formatting)</li>\n<li>SQL formatting doesn’t need to happen in the browser - that could become an API call</li>\n</ul>\n<h2>The Goal</h2>\n<p>The core SQLPad experience is centered around 2 JavaScript libraries</p>\n<ul>\n<li>Ace editor (422 KB + 25 KB for its React wrapper)</li>\n<li>Taucharts (379 KB + 170 KB for its d3 dependencies)</li>\n</ul>\n<p>Because this is a React project, there’s also react and react-dom adding another 112 KB.</p>\n<p>This puts the core SQLPad project without my code or any of the smaller libraries or component libraries at about 1100 KB.</p>\n<p>Before officially publishing SQLPad v3, I’d like to get the bundle size under 1.5 MB uncompressed at a minimum with 1.25 MB as a stretch goal.</p>","frontmatter":{"title":"Bundle Battle 1 - Bundle Analysis","date":"April 28, 2019","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/20190429-bundle-battle-2/","previous":{"fields":{"slug":"/20190420-hello-world/"},"frontmatter":{"title":"Switching to Gatsby"}},"next":{"fields":{"slug":"/20190428-bundle-battle/"},"frontmatter":{"title":"Bundle Battle 1 - Bundle Analysis"}}}}